---
layout: post
title:  "渗透测试面试基础"
date:   2017-08-15 20:27:00
categories: 渗透测试
permalink: /archivers/渗透测试面试基础
---

> 说明：本帖后续会根据搜集持续更新，可能存在错误之处，请不吝指出，谢谢！

#### 拿到一个待检测的站，你觉得应该先做什么？

* 收集信息。
<br />whois、网站源IP、旁站、C段网站、服务器系统版本、容器版本、程序版本、数据库类型、二级域名、防火墙、维护者信息另说...

#### mysql的网站注入，5.0以上和5.0以下有什么区别？

* 5.0以下没有information_schema这个系统表，无法列表名等，只能暴力跑表名。
* 5.0以下是多用户单操作，5.0以上是多用户多操做。

#### 在渗透过程中，收集目标站注册人邮箱对我们有什么价值？

* 丢社工库里看看有没有泄露密码，然后尝试用泄露的密码进行登录后台。
* 用邮箱做关键词进行丢进搜索引擎。
* 利用搜索到的关联信息找出其他邮进而得到常用社交账号。
* 社工找出社交账号，里面或许会找出管理员设置密码的习惯 。
* 利用已有信息生成专用字典。
* 观察管理员常逛哪些非大众性网站，拿下它，你会得到更多好东西。

#### 判断出网站的CMS对渗透有什么意义？

* 查找网上已曝光的程序漏洞。
* 如果开源，还能下载相对应的源码进行代码审计。

#### 一个成熟并且相对安全的CMS，渗透时扫目录的意义？

* 敏感文件、二级目录扫描
* 站长的误操作比如：网站备份的压缩文件、说明.txt、二级目录可能存放着其他站点

#### 常见的网站服务器容器。

* IIS、Apache、nginx、Lighttpd、Tomcat

#### mysql注入点，用工具对目标站直接写入一句话，需要哪些条件？

* root权限以及网站的绝对路径。

#### 目前已知哪些版本的容器有解析漏洞，具体举例。

* IIS 6.0
<br />`/xx.asp/xx.jpg` "xx.asp"是文件夹名

* IIS 7.0/7.5 
<br />默认Fast-CGI开启，直接在url中图片地址后面输入/1.php，会把正常图片当成php解析

* Nginx 
<br />版本小于等于0.8.37，利用方法和IIS 7.0/7.5一样，Fast-CGI关闭情况下也可利用。
空字节代码`xxx.jpg%00.php`

* Apache 
<br />上传的文件命名为：test.php.x1.x2.x3，Apache是从右往左判断后缀

* lighttpd 
<br />xx.jpg/xx.php，不全,请小伙伴们在评论处不吝补充，谢谢！

#### 如何手工快速判断目标站是windows还是linux服务器？

* linux大小写敏感,windows大小写不敏感。

#### 为何一个mysql数据库的站，只有一个80端口开放？

* 更改了端口，没有扫描出来。
* 站库分离。
* 3306端口不对外开放

#### 3389无法连接的几种情况。

* 没开放3389 端口
* 端口被修改
* 防护拦截
* 处于内网(需进行端口转发)

#### 如何突破注入时字符被转义？

* 宽字符注入
* hex编码绕过

#### 在某后台新闻编辑界面看到编辑器，应该先做什么？

* 查看编辑器的名称版本,然后搜索公开的漏洞。

#### 拿到一个webshell发现网站根目录下有.htaccess文件，我们能做什么？

* 能做的事情很多，用隐藏网马来举例子： 
<br />插入
`<FilesMatch "xxx.jpg"> SetHandler application/x-httpd-php </FilesMatch>`
.jpg文件会被解析成.php文件。
* 具体其他的事情，不好详说，建议大家自己去搜索语句来玩玩。

#### 注入漏洞只能查账号密码？

* 只要权限广，拖库脱到老。

#### 安全狗会追踪变量，从而发现出是一句话木马吗？

* 是根据特征码，所以很好绕过了，只要思路宽，绕狗绕到欢，但这应该不会是一成不变的。

#### access 扫出后缀为asp的数据库文件，访问乱码。如何实现到本地利用。

* 迅雷下载，直接改后缀为.mdb。

#### 提权时选择可读写目录，为何尽量不用带空格的目录？

* 因为exp执行多半需要空格界定参数

#### 某服务器有站点A,B 为何在A的后台添加test用户，访问B的后台。发现也添加上了test用户？

* 同数据库。

#### 注入时可以不使用and或or或xor，直接order by开始注入吗？

* `and/or/xor`，前面的`1=1`、`1=2`步骤只是为了判断是否为注入点，如果已经确定是注入点那就可以省那步骤去。

#### 某个防注入系统，在注入时会提示：

```
 系统检测到你有非法注入的行为。
 已记录您的ip xx.xx.xx.xx
 时间:2016:01-23
 提交页面:test.asp?id=15
 提交内容:and 1=1
```
如何利用这个防注入系统拿shell？

* 在URL里面直接提交一句话，这样网站就把你的一句话也记录进数据库文件了 这个时候可以尝试寻找网站的配置文件 直接上菜刀链接。具体文章参见：[http://ytxiao.lofter.com/post/40583a_ab36540](http://ytxiao.lofter.com/post/40583a_ab36540)。

#### 上传大马后访问乱码时，有哪些解决办法？

* 浏览器中改编码。

#### 审查上传点的元素有什么意义？

* 有些站点的上传文件类型的限制是在前端实现的，这时只要增加上传类型就能突破限制了。

#### 目标站禁止注册用户，找回密码处随便输入用户名提示：“此用户不存在”，你觉得这里怎样利用？

* 先爆破用户名，再利用被爆破出来的用户名爆破密码。
* 其实有些站点，在登陆处也会这样提示
* 所有和数据库有交互的地方都有可能有注入。

#### 目标站发现某txt的下载地址为http://www.test.com/down/down.php?file=/upwdown/1.txt，你有什么思路？

* 这就是传说中的下载漏洞！在file=后面尝试输入index.php下载他的首页文件，然后在首页文件里继续查找其他网站的配置文件，可以找出网站的数据库密码和数据库的地址。

#### 甲给你一个目标站，并且告诉你根目录下存在/abc/目录，并且此目录下存在编辑器和admin目录。请问你的想法是？

* 直接在网站二级目录/abc/下扫描敏感文件及目录。

#### 在有shell的情况下，如何使用xss实现对目标站的长久控制？

* 后台登录处加一段记录登录账号密码的js，并且判断是否登录成功，如果登录成功，就把账号密码记录到一个生僻的路径的文件中或者直接发到自己的网站文件中。(此方法适合有价值并且需要深入控制权限的网络)。
* 在登录后才可以访问的文件中插入XSS脚本。

#### 后台修改管理员密码处，原密码显示为*。你觉得该怎样实现读出这个用户的密码？

* 审查元素 把密码处的password属性改成text就明文显示了

#### 目标站无防护，上传图片可以正常访问，上传脚本格式访问则403.什么原因？

* 原因很多，有可能web服务器配置把上传目录写死了不执行相应脚本，尝试改后缀名绕过

#### 审查元素得知网站所使用的防护软件，你觉得怎样做到的？

* 在敏感操作被拦截，通过界面信息无法具体判断是什么防护的时候，F12看HTML体部 比如护卫神就可以在名称那看到`<hws>内容<hws>`。

#### 在win2003服务器中建立一个`.zhongzi`文件夹用意何为？

* 隐藏文件夹，为了不让管理员发现你传上去的工具。